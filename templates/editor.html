<!DOCTYPE html>
<html>
<head>
    <title>Text Editor</title>
    <style>
        body { 
            font-family: Arial; 
            display: flex; 
            height: 100vh; 
            margin: 0; 
        }
        #left, #right { 
            flex: 1; 
            padding: 20px; 
            overflow-y: auto;
            border-right: 1px solid #ddd; 
        }
        #right { border-right: none; }
        .para {
            padding: 12px; 
            margin: 8px 0; 
            background: #f2f2f2;
            border-radius: 6px;
            cursor: pointer;
        }
        #result {
            width: 100%; 
            height: 90%;
        }
    </style>
</head>
<body>

<div id="left">
    <h3>Extracted Paragraphs</h3>
    <div id="paragraphs">Loading...</div>
</div>

<div id="right">
    <h3>Final Output</h3>
    <textarea id="result"></textarea>
<button onclick="submitFinal()">Next</button>

</div>

<script>
async function loadParagraphs() {
    let res = await fetch("/temp-data");
    let data = await res.json();
    let container = document.getElementById("paragraphs");
    container.innerHTML = "";

    data.paragraphs.forEach(p => {
        let div = document.createElement("div");
        div.className = "para";
        div.innerText = p;
        div.onclick = () => {
            document.getElementById("result").value += p + "\n\n";
        };
        container.appendChild(div);
    });
}

loadParagraphs();
</script>

<script>
async function submitFinal() {
    const finalText = document.getElementById("result").value;

    const res = await fetch("/submit-final", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: finalText })
    });

    const data = await res.json();
    alert("Final text saved!");
}
</script>

</body>
</html>
